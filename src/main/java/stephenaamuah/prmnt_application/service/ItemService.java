package stephenaamuah.prmnt_application.service;


import jakarta.transaction.Transactional;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.Authentication;
import org.springframework.stereotype.Service;
import stephenaamuah.prmnt_application.model.Item;
import stephenaamuah.prmnt_application.model.UserDetails;
import stephenaamuah.prmnt_application.repository.ItemCreationLogRepository;
import stephenaamuah.prmnt_application.repository.ItemDeletionLogRepository;
import stephenaamuah.prmnt_application.repository.ItemRepository;
import stephenaamuah.prmnt_application.repository.ItemUpdateLogRepository;
import stephenaamuah.prmnt_application.utils.JsonUtility;

import java.time.LocalDate;
import java.util.Date;
import java.util.List;

import static stephenaamuah.prmnt_application.model.AssetType.*;

@Service
@Slf4j
public class ItemService {

    @Autowired
    ItemRepository itemRepository;

    @Autowired
    ItemUpdateLogRepository itemUpdateLogRepository;

    @Autowired
    ItemCreationLogRepository itemCreationLogRepository;

    @Autowired
    ItemDeletionLogRepository itemDeletionLogRepository;

    @Transactional
    public void saveItem(Item item, Authentication authentication) {
        String tag = "";
        String num;
        Object principal = authentication.getPrincipal();
        if (principal instanceof UserDetails) {
            UserDetails userDetails = (UserDetails) principal;

            switch (item.getTypeOfAsset()) {
                case "CA" -> {
                    num = String.valueOf((int) (Math.random() * (200 - 100)) + 100);
                    tag = "PA/".concat(CA).concat("/").concat(num);
                    break;
                }
                case "FF" -> {
                    num = String.valueOf((int) (Math.random() * (300 - 200)) + 200);
                    tag = "PA/".concat(FF).concat("/").concat(num);
                    break;
                }
                case "TA" -> {
                    num = String.valueOf((int) (Math.random() * (400 - 500)) + 400);
                    tag = "PA/".concat(TA).concat("/").concat(num);
                    break;
                }
                default -> tag = "";
            }
            item.setTag(tag);
            item.setMaintenanceDate(LocalDate.now().plusMonths(6));
            Item savedItem = itemRepository.save(item);

            String record = JsonUtility.toJson(savedItem);
            itemCreationLogRepository.insertItemLog(userDetails.getFirstName(), userDetails.getSurname(), userDetails.getUsername(), userDetails.getRoles().get(0).getAuthority(), record, new Date());
        }
    }


    public List<Item> getAllItems() {
        List<Item> items = itemRepository.findAll();
        items.forEach(x -> {
            switch (x.getTypeOfAsset()) {
                case "CA" -> {
                    x.setTypeOfAsset("Computer Asset");
                    x.setPhoto("data:image/jpeg;base64,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");
                    break;
                }
                case "FF" -> {
                    x.setTypeOfAsset("Furniture and Fitting");
                    x.setPhoto("data:image/jpeg;base64,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");
                    break;
                }
                case "TA" -> {
                    x.setTypeOfAsset("Transportation Asset");
                    x.setPhoto("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRWJflO3iNVJXACuvFU1VKhcbQOAVaZc9h35A&s");
                    break;
                }
                default -> {
                    break;
                }
            }
        });
        return items;
    }


    public Item getItemById(Long id) {
        return itemRepository.findById(id).orElse(null);
    }

    public String updateItem(Item existingItem, Item item, Authentication authentication) {
        String old_record = JsonUtility.toJson(existingItem);

        Object principal = authentication.getPrincipal();
        if (principal instanceof UserDetails) {
            UserDetails userDetails = (UserDetails) principal;

            existingItem.setAsset(item.getAsset());
            existingItem.setBrand(item.getBrand());
            existingItem.setMaintenanceDate(item.getMaintenanceDate());
            existingItem.setDescription(item.getDescription());

            Item savedItem = itemRepository.save(existingItem);
            String new_record = JsonUtility.toJson(savedItem);
            itemUpdateLogRepository.insertUpdateLog(userDetails.getFirstName(), userDetails.getSurname(), userDetails.getUsername(), userDetails.getRoles().get(0).getAuthority(), old_record, new_record, new Date());

            return "redirect:/procureapp/dashboard";
        } else {
            return "redirect:/procureapp/items";
        }
    }


    public void deleteItem(Long id, Authentication authentication) {
        Item itemToDelete = getItemById(id);
        log.info("itemToDelete: {}", itemToDelete);
        Object principal = authentication.getPrincipal();
        if (principal instanceof UserDetails) {
            UserDetails userDetails = (UserDetails) principal;
            itemRepository.deleteById(id);
            String deleted_record = JsonUtility.toJson(itemToDelete);
            itemDeletionLogRepository.deleteItemLog(userDetails.getFirstName(), userDetails.getSurname(), userDetails.getUsername(), userDetails.getRoles().get(0).getAuthority(), deleted_record, new Date());
        }

    }
}
